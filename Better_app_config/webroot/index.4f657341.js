function e(e,t,n,d){Object.defineProperty(e,t,{get:n,set:d,enumerable:!0,configurable:!0})}var t=globalThis,n={},d={},o=t.parcelRequiree95e;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in d){var t=d[e];delete d[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){d[e]=t},t.parcelRequiree95e=o);var i=o.register;i("7qALL",function(e,t){var n=o("5tSLu");console.log("Loader Webui"),(0,n.toast)("WebUI已加载"),(0,n.fullScreen)(!1);let d=document.getElementById("app");if(!d){console.error("未找到#app容器");return}let i="/data/adb/modules/better_app_config";async function l(e,t=i,d=!1){let o=d?e:`${i}/lib/busybox_run.sh "${e}"`;try{let{errno:e,stdout:d,stderr:i}=await (0,n.exec)(o,{cwd:t});if(0===e)return d;throw Error(`\u{547D}\u{4EE4}\u{6267}\u{884C}\u{5931}\u{8D25}: 
${i}`)}catch(e){return`\u{9519}\u{8BEF}: 
${e.message}`}}let a=document.createElement("div");a.classList.add("title-container");let s=document.createElement("h5");s.textContent="Module Webui";let c=document.createElement("h5");async function r(e,t=i){w.textContent="执行中",setTimeout(async()=>{try{let n=await l(e,t);w.textContent=n,L.scrollTop=L.scrollHeight}catch(e){console.error("执行命令时发生错误:",e),w.textContent="执行命令时发生错误: "+e.message}},100)}c.textContent="version",a.appendChild(c),a.appendChild(s),d.appendChild(a),async function(){try{let e=await l(`sed -n 's/^version=//p' ${i}/module.prop`),t=await l(`sed -n 's/^versionCode=//p' ${i}/module.prop`);c.textContent=`\u{7248}\u{672C}: ${e} (${t})`}catch(e){console.error("执行命令时发生错误:",e)}}();let u=document.createElement("div");u.classList.add("card");let p=document.createElement("div");p.classList.add("card-header"),p.textContent="控制区";let m=document.createElement("div");m.classList.add("card-body");let h=document.createElement("div");h.classList.add("button-container");let C=["配置 Tricky-Store 模块","更新 boot hash(必须保证模块自带的密钥认证APP已安装)","一键重新配置","安装模块自带的app"].map(e=>{let t=document.createElement("button");return t.textContent=e,h.appendChild(t),t});m.appendChild(h);let E=document.createElement("button");E.textContent="打开隐藏应用列表菜单";let f=document.createElement("p");f.classList.add("input-container"),f.textContent="提示:命令较多时可能会卡住或者日志未输出,这是正常现象";let b=document.createElement("div");b.classList.add("input-container");let y=document.createElement("p");y.textContent="自定义shell执行";let x=document.createElement("input");x.type="text",x.placeholder="在这里可以输入自定义sh命令";let $=document.createElement("button");$.textContent="执行",b.appendChild(x),b.appendChild($),m.appendChild(E),m.appendChild(f),m.appendChild(document.createElement("br")),m.appendChild(y),m.appendChild(b),u.appendChild(p),u.appendChild(m);let g=document.createElement("div");g.classList.add("card");let v=document.createElement("div");v.classList.add("card-header"),v.textContent="日志信息";let L=document.createElement("div"),w=document.createElement("pre");w.classList.add("log-body"),w.textContent="还没有命令执行呢";let _=document.createElement("ul");_.appendChild(w),L.appendChild(_),g.appendChild(v),g.appendChild(L),C.forEach((e,t)=>{e.addEventListener("click",()=>{r([`sh ${i}/Tricky_Store/get_config.sh`,`rm -f gethash.done;sh ${i}/getboothash.sh`,`sh ${i}/action.sh`,`sh ${i}/apks/install.sh`][t])})}),$.addEventListener("click",async()=>{let e=x.value,t=await l(e,i);w.textContent=t,L.scrollTop=L.scrollHeight}),E.addEventListener("click",()=>{let e=document.createElement("div");e.classList.add("hma-body"),e.classList.add("card");let t=document.createElement("button");t.textContent="x",t.classList.add("close-button"),t.addEventListener("click",()=>{document.body.removeChild(e)});let n=document.createElement("div");n.classList.add("card-header"),n.textContent="设置隐藏应用列表",n.appendChild(t),document.createElement("div").classList.add("card-body");let o=document.createElement("div");o.classList.add("button-container"),["配置 隐藏应用列表 APP","隐藏应用列表切换黑名单模式","隐藏应用列表切换白名单模式","关闭隐藏应用列表自动重载","开启隐藏应用列表自动重载"].map(e=>{let t=document.createElement("button");return t.textContent=e,o.appendChild(t),t}).forEach((t,n)=>{t.addEventListener("click",()=>{document.body.removeChild(e),r([`sh ${i}/Hide_My_Applist/get_config.sh`,`rm -f ${i}/Hide_My_Applist/whitelist.mode;sh ${i}/Hide_My_Applist/get_config.sh`,`touch ${i}/Hide_My_Applist/whitelist.mode;sh ${i}/Hide_My_Applist/get_config.sh`,`rm -f ${i}/Hide_My_Applist/reload`,`touch ${i}/Hide_My_Applist/reload`][n])})});let a=`sed -n 's/^HMAPackageName=//p' "${i}/webroot/webUiConfig.prop"`,s=`sed -n 's/^ProfileName=//p' "${i}/webroot/webUiConfig.prop"`,c=`sed -n 's/^GetExcludeList=//p' "${i}/webroot/webUiConfig.prop"`,u=document.createElement("p");function p(e,t,n){let d=document.createElement("div");d.classList.add("input-container");let o=document.createElement("p");o.classList.add("description-up"),o.textContent=e;let l=document.createElement("input");l.id=`${n}Input`,l.type="text",l.placeholder=`\u{5728}\u{8FD9}\u{91CC}\u{8F93}\u{5165}\u{81EA}\u{5B9A}\u{4E49}${t}`;let a=document.createElement("button");return a.textContent="保存",a.addEventListener("click",async()=>{r(`sed -i 's/^${n}=.*'/'${n}=${l.value}'/" "${i}/webroot/webUiConfig.prop" && echo "\u{5DF2}\u{5199}\u{5165}`)}),d.appendChild(l),d.appendChild(a),d.appendChild(o),d}u.classList.add("description-up"),u.textContent="自定义导入配置";let m=p("↑输入正确的app包名,默认为 fuck.app.check","app包名","HMAPackageName"),h=p("↑输入正确的隐藏应用列表模板名字,默认为 不可见名单","模板配置名","ProfileName"),C=p("↑输入正确的类型(输入 true 开启,输入 false 关闭),默认为 true","是否开启排除名单生成","GetExcludeList");setTimeout(async()=>{try{let e=await l("sed -n 's/^HMAPackageName=//p' "+i+"/webroot/webUiConfig.prop",i);document.getElementById("HMAPackageNameInput").value=`${e}`;let t=await l("sed -n 's/^ProfileName=//p' "+i+"/webroot/webUiConfig.prop",i);document.getElementById("ProfileNameInput").value=`${t}`;let n=await l("sed -n 's/^GetExcludeList=//p' "+i+"/webroot/webUiConfig.prop",i);document.getElementById("GetExcludeListInput").value=`${n}`}catch(e){console.error("执行命令时发生错误:",e)}},100);let E=document.createElement("button");E.textContent="一键导入并生成配置",E.addEventListener("click",()=>{w.textContent="执行中",document.body.removeChild(e),r(`
      echo "APP\u{5305}\u{540D}: ${a}";
      echo "\u{9009}\u{62E9}\u{7684}\u{6A21}\u{677F}\u{914D}\u{7F6E}\u{540D}: ${s}";
      echo "\u{751F}\u{6210}\u{6392}\u{9664}\u{540D}\u{5355}: ${c}";
      ${i}/Hide_My_Applist/0unpack_config.sh" "/data/user/0/$(${a})/files/config.json" "$(${s})" "$(${c})
    `)}),e.appendChild(n),e.appendChild(o),e.appendChild(u),e.appendChild(m),e.appendChild(h),e.appendChild(C),e.appendChild(E),document.body.insertBefore(e,d)}),d.appendChild(u),d.appendChild(g);let k=document.createElement("div");k.id="footer",k.textContent="Designed by linying",document.body.appendChild(k)}),i("5tSLu",function(t,n){e(t.exports,"exec",()=>o),e(t.exports,"fullScreen",()=>a),e(t.exports,"toast",()=>s);let d=0;function o(e,t){return void 0===t&&(t={}),new Promise((n,o)=>{let i=`exec_callback_${Date.now()}_${d++}`;function l(e){delete window[e]}window[i]=(e,t,d)=>{n({errno:e,stdout:t,stderr:d}),l(i)};try{ksu.exec(e,JSON.stringify(t),i)}catch(e){o(e),l(i)}})}function i(){this.listeners={}}function l(){this.listeners={},this.stdin=new i,this.stdout=new i,this.stderr=new i}function a(e){ksu.fullScreen(e)}function s(e){ksu.toast(e)}i.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},i.prototype.emit=function(e,...t){this.listeners[e]&&this.listeners[e].forEach(e=>e(...t))},l.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},l.prototype.emit=function(e,...t){this.listeners[e]&&this.listeners[e].forEach(e=>e(...t))}}),o("7qALL");
//# sourceMappingURL=index.4f657341.js.map
